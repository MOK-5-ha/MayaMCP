# Maya Configuration (.env)
# -------------------------
# Note: Maya uses BYOK (Bring Your Own Key) mode. Users typically provide
# API keys through the UI. These variables are only used as fallbacks if
# the session state is unavailable.

# Model Configuration
GEMINI_MODEL_VERSION=gemini-3-flash-preview
TEMPERATURE=1.0  # Optimized for Gemini 3 Flash reasoning
MAX_OUTPUT_TOKENS=2048

# FastAPI Configuration
PORT=8000
HOST=0.0.0.0

# Environment Configuration
PYTHON_ENV=development  # Options: development, production, testing
# Set DEBUG=True only for local troubleshooting; always False in production.
DEBUG=False

# Security
# [CRITICAL] Master key for encrypting sensitive session data (like user API keys).
# Generate a secure key using: 
# python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# 
# WARNING: If left empty, a temporary ephemeral key is generated on startup.
# All encrypted session data will be UNRECOVERABLE if the application restarts,
# which will disrupt active user sessions in production.
#
# RECOMMENDATION: Generate this key once and persist it securely (e.g., in a 
# secrets manager or environment store). Ensure the key is stored safely and 
# rotated according to your security policy.
MAYA_MASTER_KEY=

# Rate Limiting & Security
# Rate limits per minute (set to 0 to disable)
MAYA_SESSION_RATE_LIMIT=10      # requests per minute per session
MAYA_APP_RATE_LIMIT=100        # requests per minute globally  
MAYA_BURST_LIMIT=5             # requests in 10-second window

# Resource limits
MAYA_MAX_SESSIONS=1000         # maximum concurrent sessions (legacy fallback)
# TODO: Reintroduce MAYA_MAX_SESSION_MEMORY_MB when memory limits are implemented
# MAYA_MAX_SESSION_MEMORY_MB=100  # NOT IMPLEMENTED: listed for future use, currently ignored by session runtime

# Modal-specific session management
MAYA_SESSIONS_PER_CONTAINER=50  # sessions per Modal container
MAYA_DEFAULT_SESSION_MEMORY_MB=50  # default memory allocation per session (in MB)
MAYA_CONTAINER_MEMORY_THRESHOLD=0.8  # memory pressure threshold (0.0-1.0)

# Session management
MAYA_SESSION_EXPIRY_SECONDS=3600    # session timeout (1 hour)
MAYA_CLEANUP_INTERVAL_SECONDS=300    # cleanup interval (5 minutes)